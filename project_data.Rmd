---
title: "Project"
output: html_document
---

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.



```{r}
install.packages("jsonlite")
#library(jsonlite)
require(jsonlite)

business.file <- 'C:/Users/Phuong/Documents/R/Bio 260/yelp_dataset_challenge_academic_dataset/yelp_academic_dataset_business.json'

business <- stream_in(file(business.file))

save(business,file='C:/Users/Phuong/Documents/R/Bio 260/business.RData')

#rm(business)
```

```{r}
review.file <- 'C:/Users/Phuong/Documents/R/Bio 260/yelp_dataset_challenge_academic_dataset/yelp_academic_dataset_review.json'

review <- stream_in(file(review.file))

save(review,file='C:/Users/Phuong/Documents/R/Bio 260/review.RData')

#rm(review)
```

```{r}
user.file <- 'C:/Users/Phuong/Documents/R/Bio 260/yelp_dataset_challenge_academic_dataset/yelp_academic_dataset_user.json'

user <- stream_in(file(user.file))

save(user,file='C:/Users/Phuong/Documents/R/Bio 260/user.RData')

#rm(user)
```

```{r}
# set working directory
# Loading RData
library(dplyr)
library(tidyr)

#b<-1
y<-load("business.RData")
#str(b)
#rm(b)
rm(y)

r <-load("review.RData")
rm(r)

u<-load("user.RData")
rm(u)
```

```{r}
# Data wrangling
lapply(business, class)
lapply(review,class)

business$Restaurants = "Restaurants" %in% business$categories

# Restaurants=True or False, then we can delete the categories and other columns(attributes,hours,neighborhoods) to have a data_frame to filter 



bus <- business %>% filter("Restaurants" %in% categories)
# cannot filter? ,list in dataframe 
#Error: data_frames can only contain 1d atomic vectors and lists

# number of reviews, average rating for all users,Number of reviews voted as 'cool'
#Number of reviews voted as 'funny'
#Number of reviews voted as 'useful'



```

```{r}
business_restaurant_index1 <- which(grepl("Restaurants",business$categories)) 


#business_restaurant_index2<- which(business$state %in% "CA") # have only one index for MA state observation

#business_restaurant_index2<- which(business$state %in% "PA") # check with PA has a lot of indexes
# Maybe only filter restaurant

#### Need to filter more 

business_restaurant_id <- business$business_id[business_restaurant_index1]

review_restaurant_index <- which(review$business_id %in% business_restaurant_id)

review_restaurant_id <- review[review_restaurant_index,"review_id"]

# Filter review by review_id
review <- review[review$review_id %in% review_restaurant_id,]

#Filter business by business_id
business <-business[business$business_id %in% business_restaurant_id,]

```


```{r}

```

You can also embed plots, for example:

```{r, echo=FALSE}

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
